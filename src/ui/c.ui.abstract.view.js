define(["libs","cBase","cUIBase"],function(a,b,c){var d=(Array.prototype.slice,Array.prototype.push),e=Object.prototype.toString,f="notCreate",g="onCreate",h="onShow",i="onHide",j={};return j.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=f,this.setOptionHander=[],this.rootBox,this.id=c.getCreateId(),this.classNames=[c.config.prefix+"view"],this.root,this.isCreate=!1},j.initialize=function(a){this.setOption(function(a,b){switch(!0){case this.allowEvents[a]:this.addEvent(a,b);break;case this.allowsPush[a]:"[object Array]"===e.call(b)?d.apply(this[a],b):this[a].push(b);break;case this.allowsConfig[a]:this[a]=b}}),this.readOption(a)},j.readOption=function(a){a=a||{};var b=this;$.each(a,function(a,c){$.each(b.setOptionHander,function(d,e){"function"==typeof e&&e.call(b,a,c)})})},j.setOption=function(a){this.setOptionHander.push(a)},j.createRoot=function(){var a=document.createElement("div");return a.className=this.classNames.join(" "),a.id=this.id,$(a)},j.addClass=function(a){if(this.classNames.push(a),this.root)if("array"==typeof a)for(var b in a)this.root.addClass(a[b]);else"string"==typeof a&&this.root.addClass(a)},j.removeClass=function(a){if("array"==typeof a)for(var b in a)this.root.removeClass(a[b]);else"string"==typeof a&&this.root.removeClass(a)},j.createHtml=function(){throw new Error("未定义createHtml方法")},j.setRootHtml=function(a){this.root&&(this.root.empty(),this.root.append(a))},j.getRoot=function(){return this.root},j.addEventType=function(a){this.allowEvents[a]=!0,this.events[a]=[]},j.addEvent=function(a,b){return this.allowEvents[a]?(this.events[a]&&this.events[a].push(b),void 0):!1},j.removeEvent=function(a,b){this.events[a]&&(b?deleleValue(b,this.events[a]):this.events[a]=[])},j.remove=function(){this.hide(),this.root.remove()},j.trigger=function(a,b){var c,d=[];if(this.events[a])for(b=b||[],c=0;c<this.events[a].length;c++)d[d.length]=this.events[a][c].apply(this,b);return d},j.create=function(){this.isCreate||this.status===g||(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=g,this.isCreate=!0)},j.template=function(a){return _.template(a)},j.showAction=function(a){this.root.show(),"function"==typeof a&&a()},j.hideAction=function(a){this.root.hide(),"function"==typeof a&&a()},j.setzIndexTop=function(a){a="number"!=typeof a?0:a,this.root.css("z-index",c.getBiggerzIndex()+a)},j.isNotCreate=function(){return this.status===f},j.isShow=function(){return this.status===h},j.isHide=function(){return this.status===i},j.show=function(a){this.status!==h&&(this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=h,a&&a.call(this)},this)))},j.hide=function(a){this.root&&this.status!==i&&this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=i,a&&a.call(this)},this))},j.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},new b.Class(j)});