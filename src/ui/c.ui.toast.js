define(["libs","cBase","cUILayer"],function(a,b,c){function d(a){switch(a.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedfocus\b/.test(a.className)}}"function"!=typeof $.needFocus&&($.needFocus=d);var e={},f={prefix:"cui-",sleep:2},g=null,h=null,i=null,j=function(a){this.hide(),a&&"function"==typeof a&&a.call(this),$(".cui-opacitymask").unbind("click"),$(".cui-toast").unbind("click")},k=function(a,b){var c=this,d=function(){$(".cui-opacitymask").unbind("click").bind("click",function(){j.call(c,b)}),$(".cui-toast").unbind("click").bind("click",function(){j.call(c,b)})};a&&setTimeout(d,400)},l=function(a,b,c,d){var e=this;this.setContent(a),"function"==typeof h&&h.call(this);var i=function(){j.call(e,c)},l=1e3*(b||f.sleep);g=setTimeout(i,l),k.call(this,d,c),this.focusPosition=setInterval($.proxy(function(){var a=document.activeElement;if($.needFocus(a)){this.focusPosition||(this.focusPosition=!0);var b=parseInt($(a).offset().top)+30;this.root.css({top:b+"px",position:"absolute"})}},this),20)},m=function(){clearTimeout(g),this.focusPosition&&(clearInterval(this.focusPosition),this.root.css({top:"50%",position:"fixed"})),"function"==typeof i&&i.call(this)};e.__propertys__=function(){h=this.show,i=this.hide,this.show=l,this.hide=m},e.initialize=function(a,b){this.addClass([f.prefix+"toast"]),a(b)},e.setContent=function(a){this.create(),this.contentDom.html(a)};var n=new b.Class(c,e);return n});