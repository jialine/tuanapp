define(["cBase","cStore"],function(a,b){"use strict";var c=new a.Class({__propertys__:function(){this.idField="",this.data=null,this.store=null},initialize:function(){for(var a=["key","lifeTime","useServerTime","isLocal","defaultData","rollbackEnabled"],c={},d=0,e=a.length;e>d;d++){var f=this[a[d]];"undefined"!=typeof f&&(c[a[d]]=f)}this.store=new b(c)},refresh:function(){var a=this.store.get();!this.data&&a&&this.data&&this.data[this.idField]!==a[this.idField]&&(this.data=a)},commit:function(){this.store.set(this.data)},rollback:function(){this.data=null},set:function(a){this.data=a},setAttr:function(a,b){this.data[a]=b},set2Store:function(a){this.set(a),this.commit()},get:function(){return this.data},getAttr:function(a){return this.data[a]}});return c.getInstance=function(){return this.instance?this.instance:this.instance=new this},c});