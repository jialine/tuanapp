define(["libs","cBase"],function(a,b){var c=c||{},d=function(a){for(var b="",c=function(){var a=Math.floor(62*Math.random());return 10>a?a:36>a?String.fromCharCode(a+55):String.fromCharCode(a+61)};b.length<a;)b+=c();return b},e=function(a,b){var c=d(8);return a.getItem(c)?(e(a,b),void 0):a.add(c,b)},f=function(a,b){for(var c=0;c<b.length;c++)e(a,b[c])};c.__propertys__=function(){this.observers=[]},c.initialize=function(a){this.setAdapter(a.data)},c.add=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)e(this.map,a[b]),this.list.push(a[b]);else e(this.map,a),this.list.push(a);this.notifyDataChanged()},c.shift=function(){return this.map.shift(),this.notifyDataChanged(),this.list.shift()},c.pop=function(){return this.map.pop(),this.notifyDataChanged(),this.list.pop()},c.remove=function(a){for(var b=0;a>b;b++)this.map.pop(),this.list.pop();this.notifyDataChanged()},c.sortBy=function(a){this.map.sortBy(a),this.list=_.sortBy(this.list,a),this.notifyDataChanged()},c.setAdapter=function(a){a=a&&a instanceof Array?a:[],this.list=$.extend(!0,[],a),this.map=new b.Hash,f(this.map,a),this.notifyDataChanged()},c.regiseterObserver=function(a){-1===this.observers.indexOf(a)&&this.observers.push(a)},c.unregiseterObserver=function(a){var b=this.observers.indexOf(a);b&&this.observers.splice(b,1)},c.notifyDataChanged=function(){for(var a=0;a<this.observers.length;a++)this.observers[a].update()};var g=new b.Class(c);return g});