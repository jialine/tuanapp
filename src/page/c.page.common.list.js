define(["libs","cUI","cBasePageView","cWidgetFactory","cCommonPageFactory","cWidgetListView"],function(a,b,c,d,e){"use strict";var f="CommonListPage";if(!e.hasPage(f)){var g=g||{};g.injectListView=function(a){a.workspace||(a.workspace=$(this.defaultHtml)),this.$el.append(a.workspace),a.container=a.container?this.$el.find(a.container):a.workspace.find("#c-list-view-container");var b=d.create("ListView");this.listview=new b(a)},g._onWidnowScroll=null,g.__isComplete__=!1,g.__isLoading__=!1,g.bottomLoading=null,g.addScrollListener=function(){this.__isComplete__=!1,this.__isLoading__=!1,$(window).bind("scroll",this._onWidnowScroll)},g.removeScrollListener=function(){$(window).unbind("scroll",this._onWidnowScroll),this.bottomLoading&&(this.bottomLoading.remove(),this.bottomLoading=null)},g.onWidnowScroll=function(){var a=b.Tools.getPageScrollPos();if(0!=a.top){var c=a.pageHeight-(a.top+a.height);81>=c&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&this.onBottomPull())}},g.closeBottomPull=function(){this.__isComplete__=!0},g.endPull=function(){this.__isLoading__=!1},g.showBottomLoading=function(){this.bottomLoading||(this.bottomLoading=$('<div class="cui-zl-load" id="zlLoading" style=""> <div class="cui-b-loading i"></div><i class="i_bef cui-blue-logo"></i> <p>加载中</p></div>'),this.$el.append(this.bottomLoading)),this.bottomLoading.show()},g.hideBottomLoading=function(){this.bottomLoading&&this.bottomLoading.hide(),this.__isLoading__=!1},g.defaultHtml='<section class="res_list"><ul class="res_list_tab_arr_r" id="c-list-view-container"></ul></section>';var h=c.extend(g);e.register({name:f,fn:h})}});