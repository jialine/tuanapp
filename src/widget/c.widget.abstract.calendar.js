define(["cBase","cUIAbstractView","cWidgetFactory"],function(a,b,c){"user strict";var d="Abstract.Calendar";if(!c.hasWidget(d)){var e=new a.Class(b,{__propertys__:function(){this.CONSTANT={CALENDAR_CHINESE_LUNAR_INFO:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835],CALENDAR_CHINESE_WEEKDAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],CALENDAR_CHINESE_NUMBER:["日","一","二","三","四","五","六","七","八","九","十"],CALENDAR_CHINESE_CARRT:["初","十","廿","卅","　"],CALENDAR_CHINESE_HOLIDAY:{1230:"除夕","0101":"初一","0115":"元宵","0405":"清明","0505":"端午","0707":"七夕","0815":"中秋","0909":"重阳"},CALENDAR_COMMON_HOLIDAY:{"0101":"元旦","0214":"情人节","0501":"五一",1001:"国庆",1225:"圣诞节"},CALENDAR_WEEKDAY_NAME:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},CALENDAR_WEEKDAY_SHORTNAME:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},CALENDAR_WEEKDAY_SHORTNAME2:{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},CALENDAR_INIT_DATE:1,CALENDAR_MONTH:5,INIT_DATE_TIME:{H:0,M:0,S:0,MS:0},CALENDAR:"calendar"}},initialize:function(a,b){a(b)},setCalendarDate:function(a){this.dateObj="undefined"!==a?a:new Date,this.SY=this.dateObj.getFullYear(),this.SM=this.dateObj.getMonth(),this.SD=this.dateObj.getDate(),this.lunarInfo=this.CONSTANT.CALENDAR_CHINESE_LUNAR_INFO},leapMonth:function(a){return 15&this.lunarInfo[a-1900]},monthDays:function(a,b){return this.lunarInfo[a-1900]&65536>>b?30:29},leapDays:function(a){return this.leapMonth(a)?65536&this.lunarInfo[a-1900]?30:29:0},lYearDays:function(a){for(var b=348,c=32768;c>8;c>>=1)b+=this.lunarInfo[a-1900]&c?1:0;return b+this.leapDays(a)},Lunar:function(a){var b,c=0,d=0,e={},f=new Date(1900,0,31),g=(a-f)/864e5;for(e.dayCyl=g+40,e.monCyl=14,b=1900;2050>b&&g>0;b++)d=this.lYearDays(b),g-=d,e.monCyl+=12;for(0>g&&(g+=d,b--,e.monCyl-=12),e.year=b,e.yearCyl=b-1864,c=this.leapMonth(b),e.isLeap=!1,b=1;13>b&&g>0;b++)c>0&&b===c+1&&e.isLeap===!1?(--b,e.isLeap=!0,d=this.leapDays(e.year)):d=this.monthDays(e.year,b),e.isLeap===!0&&b===c+1&&(e.isLeap=!1),g-=d,e.isLeap===!1&&e.monCyl++;return 0===g&&c>0&&b===c+1&&(e.isLeap?e.isLeap=!1:(e.isLeap=!0,--b,--e.monCyl)),0>g&&(g+=d,--b,--e.monCyl),e.month=b,e.day=g+1,e},cDay:function(a,b){var c,d=this.CONSTANT.CALENDAR_CHINESE_NUMBER,e=this.CONSTANT.CALENDAR_CHINESE_CARRT;switch(c=a>10?"十"+d[a-10]:d[a],c+="月",b){case 10:c+="初十";break;case 20:c+="二十";break;case 30:c+="三十";break;default:c+=e[Math.floor(b/10)],c+=d[b%10]}return c},solarDay2:function(a){this.setCalendarDate(a);var b=new Date(this.SY,this.SM,this.SD),c=this.Lunar(b),d=(c.month>=10?c.month:"0"+c.month)+""+(c.day>=10?c.day:"0"+c.day);return c=null,d},weekday:function(){var a=this.CONSTANT.CALENDAR_CHINESE_WEEKDAY;return a[this.dateObj.getDay()]},YYMMDD:function(){var a=[this.SY,"年",this.SM+1,"月",this.SD,"日"];return a.join("")}});c.register({name:d,fn:e})}});